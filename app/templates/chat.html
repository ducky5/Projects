{% extends 'uniform/base.html' %}

{% block meta %}
<meta name="keywords" content="chat, realtime chat page">
{% endblock %}

{% block css_files %}
<link rel="stylesheet" href="{{ url_for('static',
filename='css/minified/chat.css') }}">
{% endblock %}

{% block title %}Chat{% endblock %}

{% block content %}
<div class="chat-container">
  <div class="recipient-username">{{ recipient_username }}</div>

  <div class="scrollable-chat" id="scrollable-chat">
    <div id="recipient_msg_from_websocket">
      {% if recipient_gender == 'female' and not
      latest_recipient_msg.is_auto_generated %}
      <div class="recipient-pronoun">Her</div>
      {% elif recipient_gender == 'male' and not
      latest_recipient_msg.is_auto_generated %}
      <div class="recipient-pronoun">Him</div>
      {% elif latest_recipient_msg.is_auto_generated %}
      <div class="recipient-pronoun">[AUTO-GENERATED]</div>
      {% endif %}
      <div class="recipient-message">{{ latest_recipient_msg.message }}</div>
    </div>

    <div id="current_user_msg_from_client_js">
      {% if not latest_current_user_msg.is_auto_generated %}
      <div class="sender-pronoun">You</div>
      <div class="sender-message">{{ latest_current_user_msg.message }}</div>
      {% endif %}
    </div>

  </div>

  <!-- input area -->
  <div class="send-message">
    <textarea type="text" name="message" placeholder="type here..."
    id="text-to-send"></textarea>
    <button type="button" name="send" id="send-text"
    RECIPIENT_ID="{{ recipient_id }}">
      <i class="fas fa-paper-plane"></i>
    </button>
  </div>
</div>
{% endblock %}

{% block javascript %}
<!-- socketio library -->
<script src="{{ url_for('static',
filename='js/external_libraries/minified/socketio.js')
}}"></script>
<!-- chat.js -->
<script src="{{ url_for('static', filename='js/minified/chat.js') }}"></script>
{% endblock %}
